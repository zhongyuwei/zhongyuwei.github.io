# 20190402 模拟考试

标签（空格分隔）： 总结

---

### T1 Painting

有$n$个格子排成一排，你需要进行$m$次涂色，每一次你会选出连续的一段$[l,r]$，把它们的颜色修改为某个值。给出最终得到的$n$个格子的颜色。保证其中恰好有$m$种颜色，保证一定存在一种合法的涂色方案。问你所有的涂色操作的$\sum r-l+1$的最大值。$n\le 10^5,m\le 5000$

Solution：

显然我们第一次涂色的时候，选择的区间一定是$[1,n]$，并且之后，对于颜色等于我们第一次选择的颜色的部分，我们都不能够再动这些格子了。这就转化成了若干个子问题。直接区间$dp$可以得到$30$分。

有一个结论，是我们转移的时候，选择的颜色，一定是区间的左端点或者右端点的颜色。这样转移的复杂度可以优化到$O(1)$。

还有一个问题是如果我们直接把所有的连续颜色段缩掉，状态的数量是$O((2m)^2)$的，还是会爆空间。考虑到每个颜色只有一个颜色段可以作为左端点，只有一个颜色段可以作为右端点，其它在中间的颜色段不能够作为状态的端点。我们可以直接用$dp[i][j]$表示区间左端点的颜色是$i$，右端点的颜色是$j$的那个合法区间。这样的复杂度就降到$O(m^2)$了。

---

### T2 Path

有一张$n$个点$m$条边的无向图。所有的边都被禁止通行了。每一周会随机有一条边被允许通行（这一周过后这条边就禁止通行了）。问最优策略下，从$1$号点到$n$号点，期望最少需要多少周。$n\le 10^5$

Solution：考虑我们在某一个点$u$的策略，一定是钦定若干个相邻的点，一旦等到这些点中任意一个点到$u$之间的边被解禁就走到那个点。假设这些钦定的点有$k$个，它们到$n$号点的距离期望分别是$d_1,d_2\cdots d_k$，那么有：
$$
d_u = \sum_{i=1}^k {1\over m} d_k + {m-k\over m}d _u + 1\\
d_u = {\sum_{i=1}^k d_k + m\over k}
$$

感性理解一下这个东西里面没有负环。于是可以直接从终点开始跑spfa。

然而如果直接改成dijstra，并且让每一个点的$k$尽量大（而不是枚举$k$选最大的那个），也是可以通过这道题的。不知道这样为什么是对的。

---

### T3 Tree

有一个$n$个点的树。对于每一个$k\in [1,n]$，你需要求出：在树上放$k$个关键点，最优策略下树上离关键点最远的点到关键点的距离。$n\le 10^5$

Solution：有一道非常像的题叫做CF1039D You are Given a Tree。

考虑$k$的答案上界是$n\over k$，这样对于$k>\sqrt n$，它的答案一定小于$\sqrt n$，因此我们根据答案是否相同可以把所有的$k$划分成$O(\sqrt n )$段。整体二分可以做到$O(n\sqrt n \log n)$的复杂度。这样可以得到$60$分的好成绩。

题解的做法是$O(n\log ^2 n) $的，然而我并没有看懂怎么做。